import os

FC=os.environ.get('FC')

fsources = ['gen_velfg_superkernel.f95', 'stage_kernel_1.f95', 
#'velfg_map_133.f95', 'velfg_map_218.f95', 'velfg_map_76.f95', #'les_map_87.f95' , 'les_map_107.f95' ,
         'velfg_superkernel.f95']

FLFLAGS = ['-Ofast','-flto']
#FLFLAGS += ['-fopenmp','-DWITH_OPENMP']
FFLAGS = FLFLAGS + ['-Wall','-cpp','-m64','-ffree-form','-ffree-line-length-0','-fconvert=little-endian','-frecord-marker=4']#, '-fopenmp']

envF=Environment(F95=FC,LINK=FC,LINKFLAGS=FLFLAGS,F95FLAGS=FFLAGS,F95PATH=['.' ,'/usr/local/include'])

envF.Program('prog-no-omp.exe',fsources,LIBS=['m'],LIBPATH=['.' ,'/usr/lib','/usr/local/lib'])

